mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
filter(! test %in% c("embed2", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", 0, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", 0, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT3") %>%
filter(! test %in% c("embed2", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", 0, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", 0, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT3") %>%
filter(! test %in% c("embed1", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed2", 0, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", 0, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
filter(! test %in% c("embed1", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed2", 0, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", 0, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
filter(! test %in% c("embed1", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed2", 0, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", 0, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "JRNN") %>%
filter(! test %in% c("embed1", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed2", 0, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", 0, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "JRNN") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", 0, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", 0, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", 0, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", 0, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", 0, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", 0, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT3") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", 0, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", 0, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (1|item) + (1|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap||item) + (wh + gap||dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound||item) + (wh + gap||dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound||item) + (wh + gap+ dist+unbound||dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "JRNN") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound||item) + (wh + gap+ dist+unbound||dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound||item) + (wh + gap+ dist+unbound||dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT3") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound||item) + (wh + gap+ dist+unbound||dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dep_length * unbound + (wh + gap + dist + unbound | item), data = .)
summary(m)
df_comp_stat
m = df_comp_stat %>%
filter(model == "GRNN") %>%
filter(! test %in% c("embed1", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound|item) + (wh + gap+ dist+unbound|dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
filter(! test %in% c("embed1", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound|item), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
filter(! test %in% c("embed1", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist |item), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist |item), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist |item) + (wh + gap + dist | dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
filter(! test %in% c("embed3", "embed4")) %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist |item) + (wh + gap + dist || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist |item) + (wh + gap + dist || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist ||item) + (wh + gap + dist || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "JRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist ||item) + (wh + gap + dist || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist ||item) + (wh + gap + dist || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
mutate(dist = if_else(test == "subj" | test == "embed1", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist | item) + (wh + gap + dist || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist | item) + (wh + gap + dist || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist | item) + (wh + gap + dist || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item) + (wh + gap + dist + unbound || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item) + (wh + gap + dist + unbound || dep_length), data = .)
summary(m)
df_unbound_comp_stat = df %>%
rename(idx = sent_idx) %>%
filter(test == "embed1" | test == "embed2" | test == "embed3" | test == "embed4") %>%
separate(condition, sep="_", into=c("wh", "gap")) %>%
gather(model, surprisal, 8:12) %>%
mutate(wh_idx = if_else(token == "who" | token == "what", idx, as.integer(0))) %>%
group_by(item, model, test) %>% #Get the IDX of the wh-token (in conditions where we have a wh word)
mutate(wh_idx = max(wh_idx)) %>%
ungroup() %>%
group_by(test, item, wh, gap, region, model, wh_idx) %>%
summarise(surprisal = mean(surprisal),
idx = min(idx)) %>%
ungroup() %>%
mutate(test=factor(test, levels=c("embed1", "embed2", "embed3", "embed4"))) %>%
filter((gap == "gap" & region == "continuation") | (gap == "no-gap" & region == "Unnamed: 7") ) %>%
mutate(dep_length = idx - wh_idx)
df_heriarchy_comp_stat = df %>%
rename(idx = sent_idx) %>%
filter(test == "hierarchy") %>%
separate(condition, sep="_", into=c("wh", "gap", "test")) %>%
gather(model, surprisal, 8:12) %>%
mutate(wh_idx = if_else(token == "who" | token == "what", idx, as.integer(0))) %>%
group_by(item, model, test) %>% #Get the IDX of the wh-token (in conditions where we have a wh word)
mutate(wh_idx = max(wh_idx)) %>%
ungroup() %>%
group_by(test, item, wh, gap, region, model, wh_idx) %>%
summarise(surprisal = sum(surprisal),
idx = min(idx)) %>%
ungroup() %>%
mutate(test = factor(test, levels = c("subj", "matrix"))) %>%
filter( (test == "matrix" & gap == "gap" & region == "continuation") | (test == "subj" & gap == "gap" & region == "filler") |
(test == "matrix" & gap == "nogap" & region == "matrix_gap") | (test == "subj" & gap == "nogap" & region == "subject_gap")) %>%
mutate(dep_length = idx - wh_idx)
df_comp_stat =  rbind(df_heriarchy_comp_stat, df_unbound_comp_stat)
m = df_comp_stat %>%
filter(model == "JRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item) + (wh + gap + dist + unbound || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item) + (wh + gap + dist + unbound || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item) + (wh + gap + dist + unbound || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT3") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item) + (wh + gap + dist + unbound || dep_length), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "JRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound | item), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT3") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item), data = .)
summary(m)
df_unbound_comp_stat = df %>%
rename(idx = sent_idx) %>%
filter(test == "embed1" | test == "embed2" | test == "embed3" | test == "embed4") %>%
separate(condition, sep="_", into=c("wh", "gap")) %>%
gather(model, surprisal, 8:12) %>%
mutate(wh_idx = if_else(token == "who" | token == "what", idx, as.integer(0))) %>%
group_by(item, model, test) %>% #Get the IDX of the wh-token (in conditions where we have a wh word)
mutate(wh_idx = max(wh_idx)) %>%
ungroup() %>%
group_by(test, item, wh, gap, region, model, wh_idx) %>%
summarise(surprisal = mean(surprisal),
idx = min(idx)) %>%
ungroup() %>%
mutate(test=factor(test, levels=c("embed1", "embed2", "embed3", "embed4"))) %>%
filter((gap == "gap" & region == "continuation") | (gap == "no-gap" & region == "Unnamed: 7") ) %>%
mutate(dep_length = idx - wh_idx)
df_heriarchy_comp_stat = df %>%
rename(idx = sent_idx) %>%
filter(test == "hierarchy") %>%
separate(condition, sep="_", into=c("wh", "gap", "test")) %>%
gather(model, surprisal, 8:12) %>%
mutate(wh_idx = if_else(token == "who" | token == "what", idx, as.integer(0))) %>%
group_by(item, model, test) %>% #Get the IDX of the wh-token (in conditions where we have a wh word)
mutate(wh_idx = max(wh_idx)) %>%
ungroup() %>%
group_by(test, item, wh, gap, region, model, wh_idx) %>%
summarise(surprisal = sum(surprisal),
idx = min(idx)) %>%
ungroup() %>%
mutate(test = factor(test, levels = c("subj", "matrix"))) %>%
filter( (test == "matrix" & gap == "gap" & region == "continuation") | (test == "subj" & gap == "gap" & region == "filler") |
(test == "matrix" & gap == "nogap" & region == "matrix_gap") | (test == "subj" & gap == "nogap" & region == "subject_gap")) %>%
mutate(dep_length = idx - wh_idx)
df_comp_stat =  rbind(df_heriarchy_comp_stat, df_unbound_comp_stat)
m = df_comp_stat %>%
filter(model == "JRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GRNN") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT2") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item), data = .)
summary(m)
m = df_comp_stat %>%
filter(model == "GPT3") %>%
mutate(dist = if_else(test == "subj" | test == "embed1" | test == "embed2", -1, 1)) %>%
mutate(unbound = if_else(test == "subj" | test == "matrix", -1, 1)) %>%
mutate(gap = if_else(gap == "nogap", "no-gap", gap)) %>%
mutate(gap = if_else(gap == "gap", 1, -1),
wh = if_else(wh == "what", 1, -1)) %>%
lmer(surprisal ~ wh * gap * dist * unbound + (wh + gap + dist + unbound || item), data = .)
summary(m)
